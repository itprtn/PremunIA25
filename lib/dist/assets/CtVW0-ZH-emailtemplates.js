import{j as e}from"./dfWdBlna-chunk.js";import{r as n}from"./Dc2Emx3F-chunk.js";import{u as s,B as a,C as t,a as r,I as i,S as o,b as l,c,d,e as m,m as p,n as u,f as x,D as g,g as h,h as v,i as f,T as j,j as N,k as b,l as y,r as w,t as _,s as C,o as z,L as T}from"./lYxdVFoR.js";import{Q as P,V as k,Z as A,E,W as I,Y as S,_ as L,e as q}from"./7YIM3tny-chunk.js";import{u as V}from"./DHnlrK-p-chunk.js";import"./BpqZfnrR-chunk.js";import"./Bo41tin1-chunk.js";function O({templates:z,onTemplateUpdate:T}){const[V,O]=n.useState(""),[R,U]=n.useState("all"),[D,M]=n.useState(!1),[B,G]=n.useState(!1),[F,H]=n.useState(!1),[$,Q]=n.useState(null),[Y,Z]=n.useState(!1),{toast:W}=s(),[J,K]=n.useState({nom:"",sujet:"",contenu_html:"",contenu_texte:"",categorie:"prospection",statut:"active",variables:{nom_client:"Nom complet du client",prenom:"Pr√©nom du client",nom:"Nom de famille du client",nom_commercial:"Nom du commercial assign√©",lien_rdv:"Lien de prise de rendez-vous",infos_premunia:"Informations de contact Premunia"}}),X=z.filter(e=>{const n=e.nom.toLowerCase().includes(V.toLowerCase())||e.sujet.toLowerCase().includes(V.toLowerCase()),s="all"===R||e.categorie===R;return n&&s}),ee=()=>{K({nom:"",sujet:"",contenu_html:"",contenu_texte:"",categorie:"prospection",statut:"active",variables:{nom_client:"Nom complet du client",prenom:"Pr√©nom du client",nom:"Nom de famille du client",nom_commercial:"Nom du commercial assign√©",lien_rdv:"Lien de prise de rendez-vous",infos_premunia:"Informations de contact Premunia"}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Templates Email"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"G√©rez vos mod√®les d'emails avec variables dynamiques Brevo"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(a,{onClick:async()=>{H(!0);try{const e=[{nom:"Relance Assurance Sant√© Seniors - Premunia IA",sujet:"{{nom_client}}, votre assurance sant√© seniors vous attend - Premunia",contenu_html:'\n            <div style="font-family: \'Segoe UI\', Tahoma, Geneva, Verdana, sans-serif; max-width: 600px; margin: 0 auto; line-height: 1.6; color: #333;">\n              \x3c!-- Header --\x3e\n              <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px 20px; text-align: center; border-radius: 12px 12px 0 0;">\n                <h1 style="margin: 0; font-size: 28px; font-weight: 600;">Premunia</h1>\n                <p style="margin: 8px 0 0 0; opacity: 0.9; font-size: 16px;">Votre courtier en assurance sant√© sp√©cialis√© seniors</p>\n              </div>\n              \n              \x3c!-- Content --\x3e\n              <div style="padding: 40px 30px; background: white; border: 1px solid #e0e0e0; border-top: none;">\n                <p style="margin: 0 0 24px 0; font-size: 18px; font-weight: 500;">Bonjour {{nom_client}},</p>\n                \n                <p style="margin: 0 0 24px 0; font-size: 16px; line-height: 1.7;">Nous avons remarqu√© que vous n\'avez pas encore r√©pondu √† notre proposition d\'assurance sant√© adapt√©e aux seniors.</p>\n                \n                <div style="background: #f8f9ff; padding: 24px; border-radius: 8px; margin: 24px 0;">\n                  <h3 style="color: #667eea; margin: 0 0 20px 0; font-size: 20px;">üéØ Pourquoi nous contacter maintenant ?</h3>\n                  \n                  <div style="margin: 20px 0;">\n                    <div style="margin: 12px 0; padding: 8px 0; border-left: 3px solid #28a745; padding-left: 15px;">\n                      <strong style="color: #28a745;">‚úÖ Devis gratuit et sans engagement</strong>\n                    </div>\n                    <div style="margin: 12px 0; padding: 8px 0; border-left: 3px solid #28a745; padding-left: 15px;">\n                      <strong style="color: #28a745;">‚úÖ Garanties compl√©mentaires sant√© optimis√©es</strong>\n                    </div>\n                    <div style="margin: 12px 0; padding: 8px 0; border-left: 3px solid #28a745; padding-left: 15px;">\n                      <strong style="color: #28a745;">‚úÖ Accompagnement personnalis√© par {{nom_commercial}}</strong>\n                    </div>\n                    <div style="margin: 12px 0; padding: 8px 0; border-left: 3px solid #28a745; padding-left: 15px;">\n                      <strong style="color: #28a745;">‚úÖ √âconomies significatives sur vos frais de sant√©</strong>\n                    </div>\n                  </div>\n                </div>\n                \n                <p style="margin: 24px 0; font-size: 16px; line-height: 1.7;">En tant que courtier sp√©cialis√© seniors, nous comprenons parfaitement vos besoins sp√©cifiques et vous proposons des solutions sur-mesure.</p>\n                \n                \x3c!-- Call to Action --\x3e\n                <div style="text-align: center; margin: 40px 0; padding: 30px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); border-radius: 12px;">\n                  <p style="font-size: 20px; color: white; margin: 0 0 15px 0; font-weight: 600;">üìû Contactez-nous maintenant</p>\n                  <p style="font-size: 18px; color: white; margin: 0 0 20px 0; font-weight: 500;">01 23 45 67 89</p>\n                  <a href="{{lien_rdv}}" style="display: inline-block; background: white; color: #f5576c; padding: 12px 30px; border-radius: 25px; text-decoration: none; font-weight: 600; margin: 10px 0;">\n                    üóìÔ∏è R√©server un rendez-vous\n                  </a>\n                  <p style="color: rgba(255,255,255,0.9); margin: 15px 0 0 0; font-size: 14px;">Ou r√©pondez √† cet email pour un rappel imm√©diat</p>\n                </div>\n                \n                <p style="margin: 30px 0 10px 0; font-size: 16px;">Cordialement,</p>\n                <p style="margin: 0; font-size: 16px;"><strong>{{nom_commercial}}</strong><br>\n                <em>Votre courtier en assurance sant√© Premunia</em></p>\n              </div>\n              \n              \x3c!-- Footer --\x3e\n              <div style="background: #2c3e50; color: white; padding: 30px; border-radius: 0 0 12px 12px;">\n                <div style="text-align: center;">\n                  <h4 style="color: #ecf0f1; margin: 0 0 20px 0; font-size: 18px;">üìû Informations de contact</h4>\n                  {{infos_premunia}}\n                  \n                  <div style="margin-top: 25px; padding-top: 20px; border-top: 1px solid #34495e; font-size: 12px; color: #95a5a6;">\n                    <p style="margin: 0;"><strong>Premunia</strong> - Votre courtier en assurance sant√© sp√©cialis√© seniors</p>\n                    <p style="margin: 5px 0 0 0;">Cet email vous est envoy√© dans le cadre de votre demande de devis d\'assurance sant√©.</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ',contenu_texte:"\nBonjour {{nom_client}},\n\nNous avons remarqu√© que vous n'avez pas encore r√©pondu √† notre proposition d'assurance sant√© adapt√©e aux seniors.\n\nüéØ POURQUOI NOUS CONTACTER MAINTENANT ?\n\n‚úÖ Devis gratuit et sans engagement\n‚úÖ Garanties compl√©mentaires sant√© optimis√©es  \n‚úÖ Accompagnement personnalis√© par {{nom_commercial}}\n‚úÖ √âconomies significatives sur vos frais de sant√©\n\nEn tant que courtier sp√©cialis√© seniors, nous comprenons parfaitement vos besoins sp√©cifiques et vous proposons des solutions sur-mesure.\n\nüìû CONTACTEZ-NOUS MAINTENANT : 01 23 45 67 89\n\nüóìÔ∏è R√©server un rendez-vous : {{lien_rdv}}\nOu r√©pondez √† cet email pour un rappel imm√©diat.\n\nCordialement,\n{{nom_commercial}}\nVotre courtier en assurance sant√© Premunia\n\n{{infos_premunia}}\n\nPREMUNIA - Votre courtier en assurance sant√© sp√©cialis√© seniors\nCet email vous est envoy√© dans le cadre de votre demande de devis d'assurance sant√©.\n          ",categorie:"relance",statut:"active",variables:{nom_client:"Nom complet du client",prenom:"Pr√©nom du client",nom:"Nom de famille du client",nom_commercial:"Nom du commercial assign√©",lien_rdv:"Lien de prise de rendez-vous",infos_premunia:"Informations de contact Premunia"}},{nom:"Prospection Initiale - Premunia Pro",sujet:"{{prenom}}, d√©couvrez les avantages d'une mutuelle seniors adapt√©e",contenu_html:'\n            <div style="font-family: \'Segoe UI\', Tahoma, Geneva, Verdana, sans-serif; max-width: 600px; margin: 0 auto; background: #f8f9fa;">\n              <div style="background: linear-gradient(45deg, #4facfe 0%, #00f2fe 100%); padding: 25px; text-align: center; color: white;">\n                <h1 style="margin: 0; font-size: 24px;">üí° Une mutuelle seniors qui vous ressemble</h1>\n                <p style="margin: 10px 0 0 0; opacity: 0.9;">Premunia - Solutions sant√© personnalis√©es</p>\n              </div>\n              \n              <div style="padding: 30px; background: white;">\n                <p style="font-size: 18px; margin: 0 0 20px 0;">Bonjour {{prenom}},</p>\n                \n                <p>Avez-vous pens√© √† optimiser votre couverture sant√© en tant que senior ?</p>\n                \n                <div style="background: #e8f4fd; padding: 20px; border-radius: 8px; margin: 20px 0;">\n                  <h3 style="color: #1e40af; margin: 0 0 15px 0;">üîç Analyse gratuite de vos besoins</h3>\n                  <p style="margin: 0;">Nous analysons gratuitement votre situation actuelle et vous proposons des solutions adapt√©es √† votre profil senior.</p>\n                </div>\n                \n                <div style="text-align: center; margin: 30px 0;">\n                  <a href="{{lien_rdv}}" style="background: #4facfe; color: white; padding: 15px 30px; border-radius: 25px; text-decoration: none; font-weight: 600; display: inline-block;">\n                    üìÖ R√©server mon analyse gratuite\n                  </a>\n                </div>\n                \n                <p>Tr√®s bonne journ√©e,<br><strong>{{nom_commercial}}</strong></p>\n              </div>\n              \n              <div style="background: #6c757d; color: white; padding: 20px; text-align: center;">\n                {{infos_premunia}}\n              </div>\n            </div>\n          ',contenu_texte:"\nBonjour {{prenom}},\n\nAvez-vous pens√© √† optimiser votre couverture sant√© en tant que senior ?\n\nüîç ANALYSE GRATUITE DE VOS BESOINS\n\nNous analysons gratuitement votre situation actuelle et vous proposons des solutions adapt√©es √† votre profil senior.\n\nüìÖ R√©server mon analyse gratuite : {{lien_rdv}}\n\nTr√®s bonne journ√©e,\n{{nom_commercial}}\n\n{{infos_premunia}}\n          ",categorie:"prospection",statut:"active",variables:{nom_client:"Nom complet du client",prenom:"Pr√©nom du client",nom:"Nom de famille du client",nom_commercial:"Nom du commercial assign√©",lien_rdv:"Lien de prise de rendez-vous",infos_premunia:"Informations de contact Premunia"}}];for(const n of e)await C.from("email_templates").insert([n]);W({title:"Templates IA Premunia g√©n√©r√©s",description:`${e.length} templates intelligents cr√©√©s avec variables dynamiques.`}),T()}catch(e){console.error("Error generating AI templates:",e),W({title:"Erreur",description:"Impossible de g√©n√©rer les templates IA.",variant:"destructive"})}finally{H(!1)}},disabled:F,variant:"outline",className:"gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),F?"G√©n√©ration...":"Templates IA Premunia"]}),e.jsxs(a,{onClick:()=>M(!0),className:"gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),"Nouveau Template"]})]})]}),e.jsx(t,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(i,{placeholder:"Rechercher un template...",value:V,onChange:e=>O(e.target.value),className:"max-w-md"}),e.jsxs(o,{value:R,onValueChange:U,children:[e.jsx(l,{className:"w-48",children:e.jsx(c,{placeholder:"Cat√©gorie"})}),e.jsxs(d,{children:[e.jsx(m,{value:"all",children:"Toutes les cat√©gories"}),e.jsx(m,{value:"prospection",children:"Prospection"}),e.jsx(m,{value:"relance",children:"Relance"}),e.jsx(m,{value:"onboarding",children:"Onboarding"}),e.jsx(m,{value:"newsletter",children:"Newsletter"}),e.jsx(m,{value:"promotion",children:"Promotion"})]})]})]})})}),e.jsxs(t,{className:"border-blue-200 bg-blue-50/50",children:[e.jsx(p,{children:e.jsxs(u,{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(A,{className:"h-5 w-5"}),"Variables Dynamiques Disponibles"]})}),e.jsx(r,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs",children:"{{nom_client}}"}),e.jsx("span",{className:"text-muted-foreground",children:"Nom complet"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs",children:"{{prenom}}"}),e.jsx("span",{className:"text-muted-foreground",children:"Pr√©nom"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs",children:"{{nom}}"}),e.jsx("span",{className:"text-muted-foreground",children:"Nom"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs",children:"{{nom_commercial}}"}),e.jsx("span",{className:"text-muted-foreground",children:"Commercial"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs",children:"{{lien_rdv}}"}),e.jsx("span",{className:"text-muted-foreground",children:"Lien RDV"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs",children:"{{infos_premunia}}"}),e.jsx("span",{className:"text-muted-foreground",children:"Contact Premunia"})]})]})})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:X.map(n=>{return e.jsxs(t,{className:"group hover:shadow-lg transition-all duration-200 border-0 bg-gradient-to-br from-white to-gray-50",children:[e.jsx(p,{className:"pb-3",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsx(u,{className:"text-lg line-clamp-1 group-hover:text-primary transition-colors",children:n.nom}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx(x,{className:`${s=n.categorie||"",{prospection:"bg-blue-500",relance:"bg-orange-500",onboarding:"bg-green-500",newsletter:"bg-purple-500",promotion:"bg-red-500"}[s]||"bg-gray-500"} text-white`,children:n.categorie}),e.jsx(x,{variant:"active"===n.statut?"default":"secondary",children:"active"===n.statut?"Actif":"Brouillon"}),n.variables&&Object.keys(n.variables).length>0&&e.jsxs(x,{variant:"outline",className:"text-blue-600 border-blue-200",children:[e.jsx(A,{className:"h-3 w-3 mr-1"}),"Variables"]})]})]})})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-2 font-medium",children:"Sujet"}),e.jsx("div",{className:"text-sm line-clamp-2 bg-gray-50 p-2 rounded border-l-2 border-blue-200",children:n.sujet})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Cr√©√© le ",new Date(n.created_at||"").toLocaleDateString("fr-FR")]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>(e=>{Q(e),G(!0)})(n),className:"h-8 w-8 p-0 hover:bg-blue-50",children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>(async e=>{try{const n={...e,nom:`${e.nom} (copie)`,statut:"draft"};delete n.id,delete n.created_at,delete n.updated_at;const{error:s}=await C.from("email_templates").insert([n]);if(s)throw s;W({title:"Template dupliqu√©",description:"Une copie du template a √©t√© cr√©√©e."}),T()}catch(n){console.error("Error duplicating template:",n),W({title:"Erreur",description:"Impossible de dupliquer le template.",variant:"destructive"})}})(n),className:"h-8 w-8 p-0 hover:bg-green-50",children:e.jsx(I,{className:"h-4 w-4"})}),e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>(e=>{Q(e),K({nom:e.nom,sujet:e.sujet,contenu_html:e.contenu_html,contenu_texte:e.contenu_texte||"",categorie:e.categorie||"prospection",statut:e.statut||"active",variables:e.variables||{nom_client:"Nom complet du client",prenom:"Pr√©nom du client",nom:"Nom de famille du client",nom_commercial:"Nom du commercial assign√©",lien_rdv:"Lien de prise de rendez-vous",infos_premunia:"Informations de contact Premunia"}}),Z(!0),M(!0)})(n),className:"h-8 w-8 p-0 hover:bg-yellow-50",children:e.jsx(S,{className:"h-4 w-4"})}),e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>(async e=>{try{const{error:n}=await C.from("email_templates").delete().eq("id",e);if(n)throw n;W({title:"Template supprim√©",description:"Le template a √©t√© supprim√© avec succ√®s."}),T()}catch(n){console.error("Error deleting template:",n),W({title:"Erreur",description:"Impossible de supprimer le template.",variant:"destructive"})}})(n.id),className:"h-8 w-8 p-0 hover:bg-red-50 text-red-600 hover:text-red-700",children:e.jsx(L,{className:"h-4 w-4"})})]})]})]})})]},n.id);var s})}),e.jsx(g,{open:D,onOpenChange:M,children:e.jsxs(h,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[e.jsx(v,{children:e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5"}),Y?"Modifier le template":"Cr√©er un nouveau template"]})}),e.jsxs(j,{defaultValue:"general",className:"w-full",children:[e.jsxs(N,{className:"grid w-full grid-cols-3",children:[e.jsx(b,{value:"general",children:"G√©n√©ral"}),e.jsx(b,{value:"content",children:"Contenu"}),e.jsx(b,{value:"preview",children:"Aper√ßu"})]}),e.jsxs(y,{value:"general",className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"template-name",children:"Nom du template"}),e.jsx(i,{id:"template-name",value:J.nom,onChange:e=>K({...J,nom:e.target.value}),placeholder:"Ex: Email de prospection seniors"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"template-category",children:"Cat√©gorie"}),e.jsxs(o,{value:J.categorie,onValueChange:e=>K({...J,categorie:e}),children:[e.jsx(l,{children:e.jsx(c,{})}),e.jsxs(d,{children:[e.jsx(m,{value:"prospection",children:"Prospection"}),e.jsx(m,{value:"relance",children:"Relance"}),e.jsx(m,{value:"onboarding",children:"Onboarding"}),e.jsx(m,{value:"newsletter",children:"Newsletter"}),e.jsx(m,{value:"promotion",children:"Promotion"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"template-subject",children:"Sujet de l'email"}),e.jsx(i,{id:"template-subject",value:J.sujet,onChange:e=>K({...J,sujet:e.target.value}),placeholder:"Ex: {{nom_client}}, votre devis mutuelle seniors"})]})]}),e.jsxs(y,{value:"content",className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"template-html",children:"Contenu HTML"}),e.jsx(_,{id:"template-html",value:J.contenu_html,onChange:e=>K({...J,contenu_html:e.target.value}),placeholder:"Contenu HTML avec variables {{nom_client}}, {{prenom}}, etc.",rows:12,className:"font-mono text-sm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"template-text",children:"Contenu Texte (optionnel)"}),e.jsx(_,{id:"template-text",value:J.contenu_texte,onChange:e=>K({...J,contenu_texte:e.target.value}),placeholder:"Version texte de l'email",rows:6,className:"font-mono text-sm"})]})]}),e.jsx(y,{value:"preview",className:"space-y-4 mt-6",children:e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50 max-h-96 overflow-y-auto",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Aper√ßu du template :"}),e.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:J.contenu_html.replace(/{{(\w+)}}/g,'<span class="bg-yellow-200 px-1 rounded">$1</span>')}})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t",children:[e.jsx(a,{variant:"outline",onClick:()=>{M(!1),ee(),Z(!1),Q(null)},children:"Annuler"}),e.jsxs(a,{onClick:async()=>{try{if(Y&&$){const{error:e}=await C.from("email_templates").update(J).eq("id",$.id);if(e)throw e;W({title:"Template modifi√©",description:"Le template a √©t√© modifi√© avec succ√®s."})}else{const{error:e}=await C.from("email_templates").insert([J]);if(e)throw e;W({title:"Template cr√©√©",description:"Le nouveau template a √©t√© cr√©√© avec succ√®s."})}M(!1),Z(!1),Q(null),ee(),T()}catch(e){console.error("Error saving template:",e),W({title:"Erreur",description:"Impossible de sauvegarder le template.",variant:"destructive"})}},children:[Y?"Modifier":"Cr√©er"," le template"]})]})]})}),e.jsx(g,{open:B,onOpenChange:G,children:e.jsxs(h,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(v,{children:e.jsxs(f,{children:["Aper√ßu - ",null==$?void 0:$.nom]})}),$&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Sujet:"})," ",$.sujet]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Cat√©gorie:"})," ",$.categorie]})]}),e.jsx("div",{className:"border rounded-lg p-4 bg-white max-h-96 overflow-y-auto",children:e.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:$.contenu_html.replace(/{{(\w+)}}/g,'<span class="bg-yellow-200 px-1 rounded font-semibold">$1</span>')}})})]})]})})]})}function R(){const{user:s,loading:a}=z(),t=V(),[r,i]=n.useState([]);n.useEffect(()=>{a||s||t("/login"),s&&o()},[s,a,t]);const o=async()=>{try{const{data:e}=await C.from("email_templates").select("*").order("created_at",{ascending:!1});i(e||[])}catch(e){console.error("Error loading email templates data:",e)}};return e.jsx(T,{title:"Templates Email",children:e.jsx(O,{templates:r,onTemplateUpdate:o})})}export{R as default};
