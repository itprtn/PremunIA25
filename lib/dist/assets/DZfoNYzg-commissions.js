import{j as e}from"./dfWdBlna-chunk.js";import{r as s}from"./Dc2Emx3F-chunk.js";import{s as t,B as n,A as i,p as a,C as o,a as r,T as c,j as m,k as l,l as u,m as d,n as _,r as x,S as p,b as h,c as g,d as j,e as f,I as S,f as N}from"./lYxdVFoR.js";import{P as v}from"./Z_xDiygn-chunk.js";import{R as w,ah as I,u as y,aa as C,T as O,O as E,w as A,a6 as b,e as D,g as P}from"./7YIM3tny-chunk.js";import"./DHnlrK-p-chunk.js";import"./BpqZfnrR-chunk.js";import"./Bo41tin1-chunk.js";var R=Object.defineProperty,L=(e,s,t)=>((e,s,t)=>s in e?R(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t)(e,"symbol"!=typeof s?s+"":s,t);class T{static calculateCommissionForContract(e,s,t,n,i){try{const a=String(s).replace(/[€\s]/g,"").replace(",","."),o=parseFloat(a);if(isNaN(o)||o<=0)return null;const r=e.toUpperCase().trim(),c=this.COMMISSION_CONFIGS[r];if(!c||!c.actif)return null;const m=12*o,l=o*(c.taux_annee1/100),u=m*(c.taux_annee1/100),d=u*this.RETENTION_RATE,_=m*(c.taux_recurrent/100),x=_*this.RETENTION_RATE;return{id:Date.now(),projet_id:t||0,contact_id:n,contrat_id:i,compagnie:e,cotisation_mensuelle:o,cotisation_annuelle:m,commission_mensuelle:l,commission_annuelle:u,commission_annuelle_avec_retenue:d,commission_recurrente:_,commission_recurrente_avec_retenue:x,type_commission:c.type_commission,created_at:(new Date).toISOString(),statut:"calculé",erreurs:[],metadata:{taux_annee1:c.taux_annee1,taux_recurrent:c.taux_recurrent,retention_appliquee:this.RETENTION_RATE,version_calcul:"2.0.0"}}}catch(a){return console.error(`Erreur lors du calcul de commission pour ${e}:`,a),{id:Date.now(),projet_id:t||0,contact_id:n,contrat_id:i,compagnie:e,cotisation_mensuelle:0,cotisation_annuelle:0,commission_mensuelle:0,commission_annuelle:0,commission_annuelle_avec_retenue:0,commission_recurrente:0,commission_recurrente_avec_retenue:0,type_commission:"Précompte",created_at:(new Date).toISOString(),statut:"erreur",erreurs:[a instanceof Error?a.message:"Erreur inconnue"],metadata:{}}}}static async calculateCommissionsForProject(e){try{const{data:s,error:n}=await t.from("projets").select("\n          projet_id,\n          contact_id,\n          contact:contact_id (\n            identifiant,\n            raison_sociale,\n            email\n          )\n        ").eq("projet_id",e).single();if(n||!s)throw new Error(`Projet non trouvé: ${e}`);const{data:i,error:a}=await t.from("contrats").select("*").eq("projet_id",e);if(a)throw new Error(`Erreur récupération contrats: ${a.message}`);const o=[];for(const t of i||[])if(t.contrat_compagnie&&t.prime_brute_mensuelle){const n=this.calculateCommissionForContract(t.contrat_compagnie,t.prime_brute_mensuelle,e,s.contact_id,t.id);n&&o.push(n)}return o}catch(s){throw console.error(`Erreur calcul commissions projet ${e}:`,s),s}}static async calculateAllCommissions(e={}){const s=e.batchSize||this.BATCH_SIZE;try{const{data:n,error:i}=await t.from("projets").select("projet_id, contact_id").not("projet_id","is",null);if(i)throw new Error(`Erreur récupération projets: ${i.message}`);const a=[],o=(null==n?void 0:n.length)||0;for(let t=0;t<o;t+=s){const i=((null==n?void 0:n.slice(t,t+s))||[]).map(e=>this.calculateCommissionsForProject(e.projet_id)),r=await Promise.allSettled(i);for(const e of r)"fulfilled"===e.status?a.push(...e.value):console.error("Erreur dans le lot:",e.reason);e.onProgress&&e.onProgress(Math.min(t+s,o),o)}return a}catch(n){throw console.error("Erreur calcul toutes les commissions:",n),n}}static async saveCommissionCalculations(e){try{const{error:s}=await t.from("commission_calculations").upsert(e,{onConflict:"id",ignoreDuplicates:!1});if(s)throw new Error(`Erreur sauvegarde commissions: ${s.message}`)}catch(s){throw console.error("Erreur sauvegarde calculs de commissions:",s),s}}static async getCommissionStats(){try{const{data:e,error:s}=await t.from("commission_calculations").select("*").eq("statut","calculé");if(s)throw new Error(`Erreur récupération statistiques: ${s.message}`);const n={total_commissions_mensuelles:0,total_commissions_annuelles:0,total_commissions_recurrentes:0,commissions_par_compagnie:{},commissions_par_commercial:{},evolution_mensuelle:{},taux_reussite_calculs:0};for(const t of e||[])n.total_commissions_mensuelles+=t.commission_mensuelle||0,n.total_commissions_annuelles+=t.commission_annuelle_avec_retenue||0,n.total_commissions_recurrentes+=t.commission_recurrente_avec_retenue||0,n.commissions_par_compagnie[t.compagnie]||(n.commissions_par_compagnie[t.compagnie]={nombre_contrats:0,total_commissions:0,moyenne_commission:0}),n.commissions_par_compagnie[t.compagnie].nombre_contrats++,n.commissions_par_compagnie[t.compagnie].total_commissions+=t.commission_mensuelle||0;return Object.keys(n.commissions_par_compagnie).forEach(e=>{const s=n.commissions_par_compagnie[e];s.moyenne_commission=s.total_commissions/s.nombre_contrats}),n}catch(e){throw console.error("Erreur récupération statistiques commissions:",e),e}}static getCommissionConfig(e){const s=e.toUpperCase().trim();return this.COMMISSION_CONFIGS[s]||null}static getAllCommissionConfigs(){return Object.values(this.COMMISSION_CONFIGS).filter(e=>e.actif)}static validateCommissionInput(e,s){const t=[];e&&"string"==typeof e||t.push("Le nom de la compagnie est requis"),("number"!=typeof s||isNaN(s)||s<=0)&&t.push("La cotisation doit être un nombre positif");return this.getCommissionConfig(e)||t.push(`Configuration non trouvée pour la compagnie: ${e}`),{isValid:0===t.length,errors:t}}static generateId(){return`calc_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static sanitizeCurrencyValue(e){if("number"==typeof e)return e;const s=String(e).replace(/[€\s]/g,"").replace(",",".").trim(),t=parseFloat(s);return isNaN(t)?0:t}}L(T,"RETENTION_RATE",.875),L(T,"BATCH_SIZE",50),L(T,"COMMISSION_CONFIGS",{SPVIE:{compagnie:"SPVIE",taux_annee1:40,taux_recurrent:10,type_commission:"Précompte",actif:!0,date_creation:(new Date).toISOString(),date_modification:(new Date).toISOString()},"HARMONIE MUTUELLE":{compagnie:"HARMONIE MUTUELLE",taux_annee1:15,taux_recurrent:15,type_commission:"Précompte",actif:!0,date_creation:(new Date).toISOString(),date_modification:(new Date).toISOString()},"AS SOLUTIONS":{compagnie:"AS SOLUTIONS",taux_annee1:30,taux_recurrent:10,type_commission:"Précompte",actif:!0,date_creation:(new Date).toISOString(),date_modification:(new Date).toISOString()},"SOLLY AZAR":{compagnie:"SOLLY AZAR",taux_annee1:30,taux_recurrent:10,type_commission:"Linéaire",actif:!0,date_creation:(new Date).toISOString(),date_modification:(new Date).toISOString()},"NÉOLIANE":{compagnie:"NÉOLIANE",taux_annee1:43,taux_recurrent:10,type_commission:"Précompte",actif:!0,date_creation:(new Date).toISOString(),date_modification:(new Date).toISOString()},ZENIOO:{compagnie:"ZENIOO",taux_annee1:30,taux_recurrent:10,type_commission:"Précompte",actif:!0,date_creation:(new Date).toISOString(),date_modification:(new Date).toISOString()},APRIL:{compagnie:"APRIL",taux_annee1:30,taux_recurrent:10,type_commission:"Linéaire",actif:!0,date_creation:(new Date).toISOString(),date_modification:(new Date).toISOString()},ALPTIS:{compagnie:"ALPTIS",taux_annee1:30,taux_recurrent:10,type_commission:"Linéaire",actif:!0,date_creation:(new Date).toISOString(),date_modification:(new Date).toISOString()},ENTORIA:{compagnie:"ENTORIA",taux_annee1:20,taux_recurrent:20,type_commission:"Linéaire",actif:!0,date_creation:(new Date).toISOString(),date_modification:(new Date).toISOString()},AVA:{compagnie:"AVA",taux_annee1:10,taux_recurrent:10,type_commission:"Précompte",actif:!0,date_creation:(new Date).toISOString(),date_modification:(new Date).toISOString()},COVERITY:{compagnie:"COVERITY",taux_annee1:20,taux_recurrent:20,type_commission:"Linéaire",actif:!0,date_creation:(new Date).toISOString(),date_modification:(new Date).toISOString()},"MALAKOFF HUMANIS":{compagnie:"MALAKOFF HUMANIS",taux_annee1:15,taux_recurrent:15,type_commission:"Précompte",actif:!0,date_creation:(new Date).toISOString(),date_modification:(new Date).toISOString()},"ASAF&AFPS":{compagnie:"ASAF&AFPS",taux_annee1:30,taux_recurrent:10,type_commission:"Précompte",actif:!0,date_creation:(new Date).toISOString(),date_modification:(new Date).toISOString()},"JOKER ASSURANCES":{compagnie:"JOKER ASSURANCES",taux_annee1:20,taux_recurrent:20,type_commission:"Linéaire",actif:!0,date_creation:(new Date).toISOString(),date_modification:(new Date).toISOString()},APICIL:{compagnie:"APICIL",taux_annee1:17,taux_recurrent:17,type_commission:"Linéaire",actif:!0,date_creation:(new Date).toISOString(),date_modification:(new Date).toISOString()},"ECA CAPITAL SENIOR":{compagnie:"ECA CAPITAL SENIOR",taux_annee1:40,taux_recurrent:10,type_commission:"Précompte",actif:!0,date_creation:(new Date).toISOString(),date_modification:(new Date).toISOString()},"ECA SÉRENISSIME":{compagnie:"ECA SÉRENISSIME",taux_annee1:30,taux_recurrent:10,type_commission:"Précompte",actif:!0,date_creation:(new Date).toISOString(),date_modification:(new Date).toISOString()},"ECA Autres":{compagnie:"ECA Autres",taux_annee1:30,taux_recurrent:10,type_commission:"Précompte",actif:!0,date_creation:(new Date).toISOString(),date_modification:(new Date).toISOString()},CNP:{compagnie:"CNP",taux_annee1:10,taux_recurrent:10,type_commission:"Linéaire",actif:!0,date_creation:(new Date).toISOString(),date_modification:(new Date).toISOString()},FMA:{compagnie:"FMA",taux_annee1:17,taux_recurrent:17,type_commission:"Linéaire",actif:!0,date_creation:(new Date).toISOString(),date_modification:(new Date).toISOString()}});const F=()=>{const[t,R]=s.useState([]),[L,F]=s.useState(null),[M,k]=s.useState([]),[U,V]=s.useState(!1),[$,q]=s.useState(0),[z,H]=s.useState(""),[Z,G]=s.useState(""),[B,K]=s.useState(null),[Y,J]=s.useState("");s.useEffect(()=>{Q()},[]);const Q=async()=>{V(!0);try{const e=T.getAllCommissionConfigs();k(e);F({total_commissions_mensuelles:0,total_commissions_annuelles:0,total_commissions_recurrentes:0,commissions_par_compagnie:{},commissions_par_commercial:{},evolution_mensuelle:{},taux_reussite_calculs:0}),J("")}catch(e){J("Erreur lors du chargement des données"),console.error("Erreur chargement données:",e)}finally{V(!1)}},W=e=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e),X=s=>{switch(s){case"calculé":return e.jsx(N,{variant:"default",className:"bg-green-100 text-green-800",children:"Calculé"});case"erreur":return e.jsx(N,{variant:"destructive",children:"Erreur"});case"en_attente":return e.jsx(N,{variant:"secondary",children:"En attente"});default:return e.jsx(N,{variant:"outline",children:s})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Commissions"}),e.jsx("p",{className:"text-muted-foreground",children:"Calcul automatique et gestion des commissions par compagnie d'assurance"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(n,{onClick:Q,variant:"outline",disabled:U,children:[e.jsx(w,{className:"h-4 w-4 mr-2 "+(U?"animate-spin":"")}),"Actualiser"]}),e.jsxs(n,{onClick:async()=>{V(!0),q(0),J("");try{const e=[];let s=0;const t=50;for(let i=0;i<t;i++){const n={id:`calc_${i}`,projet_id:Math.floor(i/5)+1,compagnie:["SPVIE","APRIL","NÉOLIANE"][i%3],cotisation_mensuelle:100+200*Math.random(),cotisation_annuelle:0,commission_mensuelle:0,commission_annuelle:0,commission_annuelle_avec_retenue:0,commission_recurrente:0,commission_recurrente_avec_retenue:0,type_commission:"Précompte",date_calcul:(new Date).toISOString(),statut:"calculé",erreurs:[],metadata:{}},a=T.calculateCommissionForContract(n.compagnie,n.cotisation_mensuelle);a&&(n.cotisation_annuelle=a.cotisation_annuelle,n.commission_mensuelle=a.commission_mensuelle,n.commission_annuelle=a.commission_annuelle,n.commission_annuelle_avec_retenue=a.commission_annuelle_avec_retenue,n.commission_recurrente=a.commission_recurrente,n.commission_recurrente_avec_retenue=a.commission_recurrente_avec_retenue,n.type_commission=a.type_commission),e.push(n),s++,q(Number(s/t*100)),await new Promise(e=>setTimeout(e,50))}R(e);const n={total_commissions_mensuelles:e.reduce((e,s)=>e+s.commission_mensuelle,0),total_commissions_annuelles:e.reduce((e,s)=>e+s.commission_annuelle_avec_retenue,0),total_commissions_recurrentes:e.reduce((e,s)=>e+s.commission_recurrente_avec_retenue,0),commissions_par_compagnie:{},commissions_par_commercial:{},evolution_mensuelle:{},taux_reussite_calculs:100};e.forEach(e=>{n.commissions_par_compagnie[e.compagnie]||(n.commissions_par_compagnie[e.compagnie]={nombre_contrats:0,total_commissions:0,moyenne_commission:0}),n.commissions_par_compagnie[e.compagnie].nombre_contrats++,n.commissions_par_compagnie[e.compagnie].total_commissions+=e.commission_mensuelle}),Object.keys(n.commissions_par_compagnie).forEach(e=>{const s=n.commissions_par_compagnie[e];s.moyenne_commission=s.total_commissions/s.nombre_contrats}),F(n)}catch(e){J("Erreur lors du calcul complet"),console.error("Erreur calcul complet:",e)}finally{V(!1),q(0)}},disabled:U,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Calculer Tout"]})]})]}),Y&&e.jsxs(i,{variant:"destructive",children:[e.jsx(y,{className:"h-4 w-4"}),e.jsx(a,{children:Y})]}),U&&$>0&&e.jsx(o,{children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Calcul en cours..."}),e.jsxs("span",{children:[Math.round($),"%"]})]}),e.jsx(v,{value:$,className:"w-full"})]})})}),e.jsxs(c,{defaultValue:"dashboard",className:"space-y-4",children:[e.jsxs(m,{children:[e.jsx(l,{value:"dashboard",children:"Tableau de Bord"}),e.jsx(l,{value:"calculator",children:"Calculateur"}),e.jsx(l,{value:"results",children:"Résultats"}),e.jsx(l,{value:"configs",children:"Configuration"})]}),e.jsxs(u,{value:"dashboard",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(o,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(_,{className:"text-sm font-medium",children:"Commissions Mensuelles"}),e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:W(L?L.total_commissions_mensuelles:0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total ce mois"})]})]}),e.jsxs(o,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(_,{className:"text-sm font-medium",children:"Commissions Annuelles"}),e.jsx(O,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:W(L?L.total_commissions_annuelles:0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avec retenue (87.5%)"})]})]}),e.jsxs(o,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(_,{className:"text-sm font-medium",children:"Compagnies"}),e.jsx(E,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:M.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Compagnies configurées"})]})]}),e.jsxs(o,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(_,{className:"text-sm font-medium",children:"Taux de Réussite"}),e.jsx(A,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:L?`${L.taux_reussite_calculs}%`:"0%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Calculs réussis"})]})]})]}),L&&Object.keys(L.commissions_par_compagnie).length>0&&e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(_,{children:"Répartition par Compagnie"})}),e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:Object.entries(L.commissions_par_compagnie).map(([s,t])=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.nombre_contrats," contrat",t.nombre_contrats>1?"s":""]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium",children:W(t.total_commissions)}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Moy: ",W(t.moyenne_commission)]})]})]},s))})})]})]}),e.jsx(u,{value:"calculator",className:"space-y-4",children:e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(_,{children:"Calculateur de Commission"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Testez le calcul de commissions pour une compagnie spécifique"})]}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"compagnie",children:"Compagnie d'Assurance"}),e.jsxs(p,{value:z,onValueChange:H,children:[e.jsx(h,{children:e.jsx(g,{placeholder:"Sélectionner une compagnie"})}),e.jsx(j,{children:M.map(s=>e.jsx(f,{value:s.compagnie,children:s.compagnie},s.compagnie))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"cotisation",children:"Cotisation Mensuelle (€)"}),e.jsx(S,{id:"cotisation",type:"number",step:"0.01",placeholder:"150.50",value:Z,onChange:e=>G(e.target.value)})]})]}),e.jsxs(n,{onClick:()=>{if(!z||!Z)return void J("Veuillez sélectionner une compagnie et saisir une cotisation");const e=parseFloat(Z.replace(",","."));if(isNaN(e)||e<=0||e>1e4)J("Cotisation invalide (doit être entre 0.01 et 10,000€)");else if(Z.includes("<")||Z.includes(">")||Z.includes("script"))J("Caractères non autorisés dans la cotisation");else try{const s=T.calculateCommissionForContract(z,e);s?(K(s),J("")):J("Impossible de calculer la commission pour cette configuration")}catch(s){J("Erreur lors du calcul"),console.error("Erreur calcul:",s)}},className:"w-full",disabled:!z||!Z,children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Calculer la Commission"]}),B&&e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Résultat du Calcul"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Cotisation mensuelle:"}),e.jsx("div",{className:"font-medium",children:W(B.cotisation_mensuelle)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Cotisation annuelle:"}),e.jsx("div",{className:"font-medium",children:W(B.cotisation_annuelle)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Commission mensuelle:"}),e.jsx("div",{className:"font-medium",children:W(B.commission_mensuelle)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Commission annuelle:"}),e.jsx("div",{className:"font-medium",children:W(B.commission_annuelle)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Commission avec retenue:"}),e.jsx("div",{className:"font-medium",children:W(B.commission_annuelle_avec_retenue)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Type de commission:"}),e.jsx("div",{className:"font-medium",children:B.type_commission})]})]})]})]})]})}),e.jsx(u,{value:"results",className:"space-y-4",children:e.jsxs(o,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_,{children:"Résultats des Calculs"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.length," calculs effectués"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Exporter CSV"]}),e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Rapport PDF"]})]})]}),e.jsx(r,{children:t.length>0?e.jsxs("div",{className:"space-y-4",children:[t.slice(0,10).map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"font-medium",children:["Projet #",s.projet_id]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.compagnie})]}),e.jsx("div",{className:"flex items-center space-x-2",children:X(s.statut)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium",children:W(s.commission_mensuelle)}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[W(s.commission_annuelle_avec_retenue)," annuel"]})]})]},s.id)),t.length>10&&e.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["... et ",t.length-10," autres calculs"]})]}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(C,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Aucun calcul effectué"}),e.jsx("p",{className:"text-sm",children:"Lancez un calcul pour voir les résultats ici"})]})})]})}),e.jsx(u,{value:"configs",className:"space-y-4",children:e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(_,{children:"Configuration des Compagnies"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Gestion des taux de commission par compagnie d'assurance"})]}),e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:M.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.compagnie}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Année 1: ",s.taux_annee1,"% | Récurrent: ",s.taux_recurrent,"%"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{variant:"Précompte"===s.type_commission?"default":"secondary",children:s.type_commission}),e.jsx(n,{variant:"outline",size:"sm",children:e.jsx(P,{className:"h-4 w-4"})})]})]},s.compagnie))})})]})})]})]})},M=()=>e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(F,{})});export{M as default};
